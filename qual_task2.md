# Overview

SRC qualification 2 is a locomotion and basic manipulation task. The qualification loads with R5 standing in front of a doorway with a closed door and a red button. 

You must walk close to the red button, press it, and cross the doorway once the door opens. Score is based on your ability to press the button, walking through the doorway, where R5 must walk one meter beyond the door without falling, and the time required to complete the task.

There is a line in front of the initial position of R5. When you cross this starting line your task will start. At one meter after the doorway there is a second line. Crossing this finish line will finish the task.

Start line | Finish line 
-----------|------------
![SRC_qual2_start.jpg](https://bitbucket.org/repo/xEbAAe/images/761926837-SRC_qual2_start.jpg) | ![SRC_qual2_finish.jpg](https://bitbucket.org/repo/xEbAAe/images/3413243251-SRC_qual2_finish.jpg)


# Quick Start

1. Open a new terminal and source the configuration file:

    ```
    source /opt/nasa/indigo/setup.bash
    ```

1. Run qual task 2 simulation

    ```
    roslaunch srcsim qual2.launch extra_gazebo_args:="-r" init:="true"
    ```

1. Write your solution

1. Rerun the qual 2 task along with your solution.

1. Submit your log file as detailed in section **Upload your log file** below

# 2D image processing

Please, refer to the [qualification 1 documentation](https://bitbucket.org/osrf/srcsim/wiki/qual_task1) for a description of how to process your camera images.

# Walking

The [SRCSim API](https://bitbucket.org/osrf/srcsim/wiki/api) provides a set of ROS messages that can be used to control the walking of your robot. In this tutorial, we'll use a helper script to demonstrate how to start a multi-step behavior. Once your robot is ready standing in front of the doorway, execute the following command in a new terminal:


```
#!c++

source /opt/ros/indigo/setup.bash
rosrun srcsim walk_test.py
```

The robot should start walking a few steps. 


# Arm control

# Upload your log file

You need to add the parameter `extra_gazebo_args:="-r"` to roslaunch for enabling Gazebo logging. When you're ready to start your SRC task with logging enable, type:


```
#!c++

roslaunch srcsim qual2.launch extra_gazebo_args:="-r" init:="true"
```

A log file is written at ~/.gazebo/log/<timestamp>/gzserver/state.log . You can verify that your log file has been properly generated by loading it into Gazebo:

```
#!c++

gazebo -p ~/.gazebo/log/<timestamp>/gzserver/state.log
```

It's highly recommended to playback your log files before submission.

The size of a log file can be really big depending on the complexity of the world. For submission, we'll reduce the size of the log file by sampling at lower rate and filtering some of the information. Run the following command inside the folder where your log file was created. 


```
#!c++

gz log -e -f state.log --filter *.pose/*.pose -z 10 > qual_2.log
```

And then, compress your file:

```
#!c++

gzip -c qual_2.log > qual_2.log.gz
```

Always save the original log and submit the filtered log (`qual_2.log.gz`).
